{namespace secure=Flow\Login\ViewHelpers}
<!DOCTYPE html>
<html lang="en" xmlns:f="http://typo3.org/ns/TYPO3/Fluid/ViewHelpers">
<head>
	<title>GIB Grading Tool</title>
	<f:base />
	<!--
		This application is powered by TYPO3 Flow, a free Open Source and powerful
		PHP application framework licensed under the GNU/LGPL.

		More information and contribution opportunities at http://flow.typo3.org
	-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Bootstrap -->
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.1/css/bootstrap.min.css">
	<link rel="stylesheet" href="{f:uri.resource(path: 'Stylesheets/jquery-ui-datepicker.min.css')}">
	<link rel="stylesheet" href="{f:uri.resource(path: 'Stylesheets/GIB.GradingTool.css')}">
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
	<![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
	<script src="{f:uri.resource(path: 'JavaScripts/jquery.cookie.js')}"></script>
</head>
<body>
<div class="container">

	<div class="header clearfix" id="siteHeader">
		<h1 style="float: left;">
			<f:render section="Title"/>
		</h1>
		<f:security.ifHasRole role="GIB.GradingTool:Administrator">
			<div class="pull-right">
				<f:link.action action="index" controller="Standard" class="btn btn-default btn-sm"><i class="fa fa-home"></i> Dashboard</f:link.action>
			</div>
		</f:security.ifHasRole>
	</div>

	<div class="row">
		<div class="col-md-12">
			<f:flashMessages as="flashMessages">
			<div class="messages">
				<f:for each="{flashMessages}" as="flashMessage">
					<f:if condition="{flashMessage.code} == 'OK'">
						<div class="alert alert-dismissable alert-success">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
							{flashMessage}
						</div>
					</f:if>
					<f:if condition="{flashMessage.code} == 'Notice'">
						<div class="alert alert-dismissable alert-info">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
							{flashMessage}
						</div>
					</f:if>
					<f:if condition="{flashMessage.code} == 'Warning'">
						<div class="alert alert-dismissable alert-warning">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
							{flashMessage}
						</div>
					</f:if>
					<f:if condition="{flashMessage.code} == 'Error'">
						<div class="alert alert-dismissable alert-danger">
							<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
							{flashMessage}
						</div>
					</f:if>
				</f:for>
			</div>
			</f:flashMessages>
		</div>
	</div>

	<f:render section="Content"/>

	<footer id="siteFooter">
		<f:security.ifAuthenticated>
			<f:then>
				<secure:account propertyPath="party.name" /> |
				<f:link.action action="logout" package="Flow.Login" controller="Login">Logout</f:link.action>
				<div class="pull-right">
					<f:comment><f:render partial="LanguageNavigation" arguments="{languages:languages, currentLanguage:currentLanguage}"/></f:comment>
					<f:link.action action="index" controller="Standard" class="btn btn-primary btn-sm"><i class="fa fa-home"></i> Dashboard</f:link.action>
				</div>
			</f:then>
			<f:else>
				<a class="login-panel" data-toggle="modal" data-target="#modal-login" href="{f:uri.action(controller:'Login', action: 'loginPanel', package: 'Flow.Login')}">Login</a>
				<f:comment>
				<div class="pull-right">
					<f:render partial="LanguageNavigation" arguments="{languages:languages, currentLanguage:currentLanguage}"/>
				</div>
				</f:comment>
			</f:else>
		</f:security.ifAuthenticated>
	</footer>

</div>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.1/js/bootstrap.min.js"></script>
<script src="{f:uri.resource(path: 'JavaScripts/bootbox.min.js')}"></script>
<script>
	$(document).on("click", ".returnConfirm", function(e) {
		e.preventDefault();
		var targetElement = $(e.target);
		var message = targetElement.attr('data-confirm');
		bootbox.confirm(message, function(result) {
			if (result == true) {
				window.location = targetElement.attr('href');
			}
		});
	});

	$(function() {
		/* Set a language cookie depending on the language selector */
		$('a.languageSelect').click(function(e) {
			e.preventDefault();
			$.cookie("GIB_GradingTool_Language", $(this).attr('data-language'), { path: '/'});
			location.reload(true);
		});
	});

</script>
<script src="{f:uri.resource(path: 'JavaScript/jquery.form.js', package: 'Flow.Login')}"></script>
<script src="{f:uri.resource(path: 'JavaScript/Login.js', package: 'Flow.Login')}"></script>
<div class="modal fade" id="modal-login">
</div>
</body>
</html>