{namespace form=TYPO3\Form\ViewHelpers}
<div class="clearfix"></div>
<fieldset id="{section.uniqueIdentifier}" class="{section.properties.elementClass} {f:if(condition: section.properties.displayConditionField, then: ' conditionalSection')} {f:if(condition: section.properties.elementClassAttribute, then: ' {section.properties.elementClassAttribute}')}">
	<f:if condition="{section.label}">
		<legend>{section.label}</legend>
	</f:if>
	<f:for each="{section.elements}" as="element">
		<form:renderRenderable renderable="{element}" />
	</f:for>
</fieldset>
<script type="text/javascript">
	function registerConditionalSection(fieldsetId, triggerFieldId, triggerValue) {

		$(document).delegate('.dataSheetForm-' + triggerFieldId, 'change', function(e) {
			if ($(e.target).val() == triggerValue) {
				$('fieldset#' + fieldsetId).slideToggle();
			}
		});
	}
</script>
<f:if condition="{section.properties.displayConditionField}">
	<script>
		$(function() {
			registerConditionalSection('{section.uniqueIdentifier}', '{section.properties.displayConditionField}', '{section.properties.displayConditionValue}');
		});
	</script>
</f:if>